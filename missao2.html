<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Miss√£o 2: Treinamento Avan√ßado com ESP32 e BIPES</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .nav-button {
            transition: background-color 0.2s, color 0.2s;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            color: #4b5563;
            background-color: #f3f4f6;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .nav-button:hover {
            background-color: #e5e7eb;
        }
        .nav-button.active {
            background-color: #10b981; /* Tailwind emerald-500 */
            color: white;
            font-weight: 600;
        }
        .content-section {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }
        .content-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        table {
            width: 100%;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-collapse: collapse;
            overflow: hidden;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        thead th {
            background-color: #d1fae5; /* Tailwind emerald-100 */
            font-weight: 600;
            color: #065f46;
        }
        tbody tr:last-child td {
            border-bottom: none;
        }
        tbody tr:nth-child(even) {
            background-color: #f9fafb;
        }
        .info-box {
            background-color: #f0fdf4; /* Tailwind emerald-50 */
            border-left: 4px solid #10b981;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
            color: #065f46;
        }
        .danger-box {
            background-color: #fef2f2; /* Tailwind red-50 */
            border-left: 4px solid #ef4444; /* Tailwind red-500 */
            color: #b91c1c; /* Tailwind red-700 */
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- 
        Chosen Palette: Minty Greens (emerald-50, emerald-500) with Neutrals (f8fafc, white) for a clean, tech-focused look.
        Application Structure Plan: Structured as a navigable "Centro de Controle" with a side-scrolling horizontal navigation bar for quick access to training modules. The 'In√≠cio' serves as the mission briefing and visualizes the curriculum progress. The structure prioritizes easy access to specific, practical block examples, making the lesson non-linear and explorable.
        Visualization & Content Choices:
        - Report Info: Lesson Modules (M√≥dulos 1-4) -> Goal: Show training structure overview -> Viz: Donut Chart (Chart.js) in 'In√≠cio' section -> Interaction: None (static viz) -> Justification: Visually summarizes the complex curriculum.
        - Report Info: Practical Examples -> Goal: Provide interactive code examples -> Viz: Styled HTML Tables (HTML/Tailwind) -> Interaction: User must manually execute the code in the BIPES IDE. -> Justification: Tables are the clearest way to present block sequences.
        - Report Info: Hardware Warnings (Pinagem) -> Goal: Prevent user hardware errors -> Viz: Critical Danger Box (HTML/Tailwind) -> Interaction: Requires user attention before proceeding.
        - Report Info: Navigation -> Goal: Guide user linearly -> Viz: Horizontal scrolling Nav Bar (HTML/Tailwind + JS) -> Interaction: On-click, JS shows/hides content sections.
        CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->

    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-emerald-600">üì° Miss√£o 2: Treinamento Avan√ßado</h1>
            <p class="text-xl text-gray-600 mt-2">Explorando o Potencial da ESP32 com Blocos BIPES</p>
        </header>

        <nav class="flex overflow-x-auto justify-center gap-2 sm:gap-4 pb-4 mb-12">
            <button class="nav-button active whitespace-nowrap" data-target="section-inicio">In√≠cio (Briefing)</button>
            <button class="nav-button whitespace-nowrap" data-target="section-mod1">M√≥dulo 1: Wi-Fi e BLE</button>
            <button class="nav-button whitespace-nowrap" data-target="section-mod2">M√≥dulo 2: Controle de LED</button>
            <button class="nav-button whitespace-nowrap" data-target="section-mod3">M√≥dulo 3: Leitura de Sensores</button>
            <button class="nav-button whitespace-nowrap" data-target="section-mod4">M√≥dulo 4: Comunica√ß√£o Avan√ßada</button>
            <button class="nav-button whitespace-nowrap" data-target="section-passos">Pr√≥ximos Passos</button>
        </nav>

        <main>
            <section id="section-inicio" class="content-section active">
                <div class="bg-white shadow-xl rounded-2xl p-6 sm:p-10">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">Centro de Controle: Vis√£o Geral</h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Seu ESP32 est√° conectado! Esta fase do treinamento foca em explorar a conectividade e a intera√ß√£o direta com o hardware. Voc√™ aprender√° a fazer o ESP32 se comunicar com o mundo (Wi-Fi/Bluetooth) e com seus sensores (pinos I/O).
                    </p>

                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <div class="mb-6">
                                <h3 class="text-2xl font-semibold text-gray-700 mb-3">üéØ Foco da Miss√£o</h3>
                                <p class="text-gray-600">Dom√≠nio da **Comunica√ß√£o sem Fio** (Wi-Fi e BLE) e **Controle de Perif√©ricos** (LEDs e Sensores), fundamentais para qualquer subsistema de sat√©lite.</p>
                            </div>
                            <div class="mb-6">
                                <h3 class="2xl font-semibold text-gray-700 mb-3">‚öôÔ∏è Pr√©-Requisitos</h3>
                                <p class="text-gray-600">ESP32 com MicroPython instalado e conectado via Serial no Console do BIPES (Conforme Miss√£o 1).</p>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-2xl font-semibold text-gray-700 mb-4 text-center">Progresso de Treinamento</h3>
                            <div class="chart-container">
                                <canvas id="lessonChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="section-mod1" class="content-section">
                <div class="bg-white shadow-xl rounded-2xl p-6 sm:p-10">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">M√ìDULO 1: Comunica√ß√£o sem Fio (Wi-Fi e BLE)</h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        A conectividade √© o subsistema TT&C do seu sat√©lite. O ESP32 possui Wi-Fi e Bluetooth integrados, permitindo enviar telemetria a longas dist√¢ncias (simuladas) e comandos em curtas dist√¢ncias.
                    </p>

                    <h3 class="text-2xl font-semibold text-gray-700 mb-4">Exemplo A: Conex√£o Wi-Fi (Telemetria Remota)</h3>
                    <p class="text-gray-600 mb-4">Simula√ß√£o de conex√£o √† rede da esta√ß√£o terrestre para enviar dados via internet.</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Categoria/Bloco</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>**WIFI**</td>
                                <td>`connect to Wi-Fi with SSID: "nome_do_wifi" and password: "senha"`</td>
                            </tr>
                            <tr>
                                <td>**Time**</td>
                                <td>`wait until Wi-Fi is connected`</td>
                            </tr>
                            <tr>
                                <td>**Text**</td>
                                <td>`print ("Conexao Wi-Fi OK! IP: " + get Wi-Fi IP)`</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-gray-600 mt-4">**Instru√ß√µes:** Altere `"nome_do_wifi"` e `"senha"` para suas credenciais reais. Execute. Verifique o endere√ßo IP no Console do BIPES.</p>

                    <hr class="my-10 border-gray-200">

                    <h3 class="text-2xl font-semibold text-gray-700 mb-4">Exemplo B: Bluetooth (Comando de Curto Alcance)</h3>
                    <p class="text-gray-600 mb-4">Simula√ß√£o de comando recebido por um dispositivo pr√≥ximo.</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Categoria/Bloco</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>**Bluetooth**</td>
                                <td>`set Bluetooth name to "CUBESAT-TREINAMENTO"`</td>
                            </tr>
                            <tr>
                                <td>**Bluetooth**</td>
                                <td>`on message received (message)`</td>
                            </tr>
                            <tr>
                                <td>**Logic (Dentro do on message)**</td>
                                <td>`if message equals "status"`</td>
                            </tr>
                            <tr>
                                <td>**Text (Dentro do if)**</td>
                                <td>`print ("Comando recebido: Status OK!")`</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-gray-600 mt-4">**Instru√ß√µes:** Depois de executar, use um aplicativo de terminal Bluetooth no seu celular para conectar-se ao "CUBESAT-TREINAMENTO" e envie a palavra **`status`** para acionar a resposta no console do BIPES.</p>
                </div>
            </section>

            <section id="section-mod2" class="content-section">
                <div class="bg-white shadow-xl rounded-2xl p-6 sm:p-10">
                    <h2 class="3xl font-bold text-gray-800 mb-6">M√ìDULO 2: Controle de LED (Subsistema de Atuadores)</h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Acender um LED √© o "Hello World" do controle de hardware. LEDs podem simular o acionamento de um motor, um magnetorquer (para controle de atitude) ou a abertura de uma antena.
                    </p>

                    <div class="danger-box">
                        <h4 class="font-bold text-lg mb-2">‚ö†Ô∏è Aten√ß√£o √† Pinagem!</h4>
                        <p>O n√∫mero do pino do LED integrado (**LED ONBOARD**) varia muito no ESP32-C3. Pode ser o **GPIO8** ou outro. Consulte o esquema da sua placa. Se n√£o souber, teste o GPIO2, GPIO13 e GPIO8 at√© encontrar o LED integrado.</p>
                    </div>

                    <h3 class="2xl font-semibold text-gray-700 mb-4">Exemplo C: Sequ√™ncia de Atuadores (Piscar 3 Vezes)</h3>
                    <p class="text-gray-600 mb-4">Simulando a sequ√™ncia de acionamento de tr√™s atuadores em s√©rie (ex: libera√ß√£o da antena, igni√ß√£o, in√≠cio da miss√£o).</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Categoria/Bloco</th>
                                <th>A√ß√£o (Substitua `2` pelo seu pino de LED)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>**Loops**</td>
                                <td>`repeat 3 times`</td>
                            </tr>
                            <tr>
                                <td>**Hardware (Dentro do Loop)**</td>
                                <td>`set digital pin (2) to HIGH` (Atuador 1 ON)</td>
                            </tr>
                            <tr>
                                <td>**Time**</td>
                                <td>`sleep (0.2) seconds`</td>
                            </tr>
                            <tr>
                                <td>**Hardware**</td>
                                <td>`set digital pin (2) to LOW` (Atuador 1 OFF)</td>
                            </tr>
                            <tr>
                                <td>**Time**</td>
                                <td>`sleep (0.2) seconds`</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-gray-600 mt-4">**Instru√ß√µes:** Execute. O LED piscar√° rapidamente 3 vezes e parar√°. Seu programa de inicializa√ß√£o est√° completo!</p>
                </div>
            </section>

            <section id="section-mod3" class="content-section">
                <div class="bg-white shadow-xl rounded-2xl p-6 sm:p-10">
                    <h2 class="3xl font-bold text-gray-800 mb-6">M√ìDULO 3: Leitura de Sensores (Carga √ötil)</h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        A "carga √∫til" √© o que o sat√©lite faz. Vamos conectar sensores para ler dados do mundo real. O ESP32 se comunica com sensores atrav√©s de pinos digitais (HIGH/LOW), anal√≥gicos (valores 0-4095) e protocolos (I2C/SPI).
                    </p>

                    <div class="danger-box">
                        <h4 class="font-bold text-lg mb-2">‚ö†Ô∏è Pino Anal√≥gico (Leitura da Bateria)</h4>
                        <p>Para ler a bateria (ou sensores simples), voc√™ usa um pino anal√≥gico (**ADC**). Os pinos anal√≥gicos do ESP32-C3 geralmente s√£o **GPIO0, GPIO1, GPIO2, GPIO3, etc.** Consulte o diagrama da sua placa para um pino ADC livre.</p>
                    </div>

                    <h3 class="2xl font-semibold text-gray-700 mb-4">Exemplo D: Leitura de Sensor Anal√≥gico (N√≠vel de Luz)</h3>
                    <p class="text-gray-600 mb-4">Simula√ß√£o de leitura do n√≠vel de bateria ou intensidade de luz, lendo a tens√£o de um pino.</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Categoria/Bloco</th>
                                <th>A√ß√£o (Substitua `GPIO0` pelo seu pino ADC)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>**Vari√°veis**</td>
                                <td>`create variable: LUZ`</td>
                            </tr>
                            <tr>
                                <td>**Loops**</td>
                                <td>`while True:`</td>
                            </tr>
                            <tr>
                                <td>**Hardware (Dentro do Loop)**</td>
                                <td>`set LUZ to read analog pin (GPIO0)`</td>
                            </tr>
                            <tr>
                                <td>**Text**</td>
                                <td>`print ( create text with ["Intensidade de Luz: ", LUZ] )`</td>
                            </tr>
                            <tr>
                                <td>**Time**</td>
                                <td>`sleep (1) seconds`</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-gray-600 mt-4">**Instru√ß√µes:** Conecte um resistor de 10kŒ© e um LDR (sensor de luz) ao pino anal√≥gico selecionado. Execute. Varie a luz sobre o LDR e observe o valor de 0 a 4095 no Console do BIPES.</p>
                </div>
            </section>
            
            <section id="section-mod4" class="content-section">
                <div class="bg-white shadow-xl rounded-2xl p-6 sm:p-10">
                    <h2 class="3xl font-bold text-gray-800 mb-6">M√ìDULO 4: Comunica√ß√£o Avan√ßada (Protocolo MQTT)</h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Para telemetria cont√≠nua e eficiente (economizando energia e dados), usamos o protocolo **MQTT**. Este protocolo √© ideal para enviar pequenas mensagens de dados (como temperatura e altitude) para um servidor na nuvem.
                    </p>

                    <h3 class="2xl font-semibold text-gray-700 mb-4">Exemplo E: Publica√ß√£o de Telemetria no Servidor IoT</h3>
                    <p class="text-gray-600 mb-4">Conecte-se ao Wi-Fi (Exemplo A) e publique os dados do seu sensor (Exemplo D) em um "t√≥pico" MQTT, simulando o envio de dados para o controle de miss√£o.</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Categoria/Bloco</th>
                                <th>A√ß√£o (Continua√ß√£o do Exemplo D)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>**WIFI**</td>
                                <td>`(Blocos de Conex√£o Wi-Fi do Exemplo A)`</td>
                            </tr>
                            <tr>
                                <td>**IoT / MQTT**</td>
                                <td>`connect MQTT (Sem senha, se for servidor publico)`</td>
                            </tr>
                            <tr>
                                <td>**Loops**</td>
                                <td>`while True:`</td>
                            </tr>
                            <tr>
                                <td>**IoT / MQTT (Dentro do Loop)**</td>
                                <td>`publish message (LUZ) to topic "satelite/telemetria"`</td>
                            </tr>
                            <tr>
                                <td>**Time**</td>
                                <td>`sleep (5) seconds`</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-gray-600 mt-4">**Instru√ß√µes:** Depois de executar e conectar ao Wi-Fi, abra o Painel IoT do BIPES (ou qualquer cliente MQTT) e "assine" o t√≥pico `satelite/telemetria`. Voc√™ ver√° os dados de luz chegando em tempo real! (A placa deve estar conectada √† internet).</p>
                </div>
            </section>

            <section id="section-passos" class="content-section">
                <div class="bg-white shadow-xl rounded-2xl p-6 sm:p-10 text-center">
                    <h2 class="3xl font-bold text-gray-800 mb-6">6. Pr√≥ximos Passos (Pronta para a Miss√£o)</h2>
                    <p class="text-xl text-gray-600 leading-relaxed mb-8">
                        Parab√©ns! Voc√™ dominou os principais subsistemas de controle e comunica√ß√£o do ESP32. Voc√™ est√° pronto para construir a estrutura do seu CubeSat/CanSat.
                    </p>
                    <div class="info-box max-w-3xl mx-auto text-left">
                        <h4 class="font-bold text-2xl mb-4">Desafio Final: O Sistema Completo</h4>
                        <p class="text-lg">Combine os exemplos aprendidos:</p>
                        <ul class="list-disc list-inside mt-4 space-y-2">
                            <li>Conecte o ESP32 ao **Wi-Fi** (M√≥dulo 1).</li>
                            <li>Use um bloco **`while True`** (M√≥dulo 2).</li>
                            <li>Dentro do `while True`, **leia um sensor** (M√≥dulo 3) real (ex: DHT11).</li>
                            <li>Publique o valor da leitura no **MQTT** (M√≥dulo 4).</li>
                            <li>Crie uma condi√ß√£o **`if/else`** para piscar o LED (M√≥dulo 2) se o valor do sensor for muito alto (Modo de Seguran√ßa).</li>
                        </ul>
                    </div>
                    <p class="text-lg text-gray-600 mt-8">Este √© o n√∫cleo de um sat√©lite funcional. V√° em frente e crie sua pr√≥pria miss√£o espacial!</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');
            let activeSection = 'section-inicio';
            let activeNavButton = document.querySelector('.nav-button.active');

            function showSection(sectionId) {
                contentSections.forEach(section => {
                    section.classList.remove('active');
                });
                
                const newSection = document.getElementById(sectionId);
                    if (newSection) {
                    newSection.classList.add('active');
                    activeSection = sectionId;
                }
            }

            function updateNav(clickedButton) {
                if (activeNavButton) {
                    activeNavButton.classList.remove('active');
                }
                clickedButton.classList.add('active');
                activeNavButton = clickedButton;
            }

            navButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const targetId = e.currentTarget.dataset.target;
                    updateNav(e.currentTarget);
                    showSection(targetId);
                });
            });

            function initChart() {
                const ctx = document.getElementById('lessonChart');
                if (!ctx) return; 

                const chartInstance = new Chart(ctx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: [
                            'M√≥dulo 1: Wi-Fi e BLE', 
                            'M√≥dulo 2: Controle de LED', 
                            'M√≥dulo 3: Leitura de Sensores', 
                            'M√≥dulo 4: Comunica√ß√£o Avan√ßada'
                        ],
                        datasets: [{
                            label: 'Progresso (%)',
                            data: [25, 25, 25, 25],
                            backgroundColor: [
                                '#34d399', /* Emerald-400 */
                                '#10b981', /* Emerald-500 */
                                '#059669', /* Emerald-600 */
                                '#047857'  /* Emerald-700 */
                            ],
                            borderColor: 'white',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            label += context.parsed + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Garante que o gr√°fico inicialize ap√≥s o DOM estar pronto
            initChart();
            showSection(activeSection);
            
        });
    </script>
</body>
</html>
