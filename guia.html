<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo OBSAT - Fase 2: Programa√ß√£o e Testes</title>
    <!-- Carregamento do Tailwind CSS CDN para estiliza√ß√£o -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
            scroll-behavior: smooth;
        }
        .sidebar {
            transition: transform 0.3s ease-in-out;
        }
        .menu-link {
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }
        .menu-link:hover {
            background-color: #e0f2f1;
            border-left-color: #00796b;
        }
        .menu-link.active {
            background-color: #e0f2f1;
            border-left-color: #00796b;
            font-weight: 600;
            color: #00796b;
        }
        /* Estilos para a barra de progresso do v√≠deo */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            margin-top: 1.5rem;
            border-radius: 0.5rem;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="min-h-screen flex flex-col md:flex-row">
        <!-- Sidebar (Menu Lateral) -->
        <aside id="sidebar" class="sidebar bg-white p-6 shadow-xl md:shadow-md md:w-64 fixed md:sticky top-0 h-16 md:h-screen z-20 w-full md:flex-shrink-0 transform -translate-x-full md:translate-x-0">
            <!-- T√≠tulo do Menu para Mobile -->
            <div class="flex justify-between items-center mb-4 md:mb-8 h-full md:h-auto">
                <h2 class="text-xl font-bold text-gray-800 hidden md:block">Guia da Fase 2</h2>
                <button id="menu-toggle" class="md:hidden p-2 rounded-lg bg-gray-100 text-gray-700">
                    <!-- Icone de Fechar (escondido inicialmente) -->
                    <svg id="close-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    <!-- Icone de Menu (vis√≠vel inicialmente) -->
                    <svg id="menu-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>

            <!-- Links do Menu (Inicialmente escondidos no mobile) -->
            <nav id="menu-links" class="flex flex-col space-y-2 pt-4 md:pt-0 hidden md:flex">
                <a href="#requisitos" class="menu-link p-3 rounded-lg text-sm text-gray-700">1. Requisitos Fundamentais (Revis√£o)</a>
                <a href="#programacao" class="menu-link p-3 rounded-lg text-sm text-gray-700">2. Programa√ß√£o com BIPES</a>
                <a href="#sensores" class="menu-link p-3 rounded-lg text-sm text-gray-700 ml-4 border-none">2.1. Leitura dos Sensores</a>
                <a href="#json" class="menu-link p-3 rounded-lg text-sm text-gray-700 ml-4 border-none">2.2. JSON e L√≥gica de Envio</a>
                <a href="#testes" class="menu-link p-3 rounded-lg text-sm text-gray-700">3. Estrat√©gias de Testes de Robustez</a>
                <a href="#mecanica" class="menu-link p-3 rounded-lg text-sm text-gray-700 ml-4 border-none">3.1. Robustez Mec√¢nica</a>
                <a href="#eletronica" class="menu-link p-3 rounded-lg text-sm text-gray-700 ml-4 border-none">3.2. Robustez Eletr√¥nica e Magn√©tica</a>
                <a href="#termica" class="menu-link p-3 rounded-lg text-sm text-gray-700 ml-4 border-none">3.3. Robustez T√©rmica (Simula√ß√£o)</a>
                <a href="#transmissao" class="menu-link p-3 rounded-lg text-sm text-gray-700 ml-4 border-none">3.4. Teste de Transmiss√£o de Dados</a>
            </nav>
        </aside>

        <!-- Conte√∫do Principal -->
        <main class="flex-1 p-6 md:p-10">
            <header class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h1 class="text-3xl md:text-4xl font-extrabold text-[#00796b] mb-2">Construa e Comprove: Guia da Fase 2 OBSAT</h1>
                <p class="text-lg text-gray-600">Foco na Programa√ß√£o do ESP32 (BIPES) e Testes de Robustez para a Miss√£o Estratosf√©rica.</p>
            </header>

            <section id="requisitos" class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-6 border-b pb-2">1. Requisitos Fundamentais da Fase 2 (Revis√£o)</h2>
                <p class="mb-4 text-gray-600">A sua programa√ß√£o e os seus testes devem validar que o SmallSat est√° pronto para as condi√ß√µes de altitude de at√© 40 km e para a submiss√£o obrigat√≥ria.</p>
                
                <!-- NOVO DESTAQUE: ENTREG√ÅVEIS E PRAZO -->
                <div class="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 rounded-lg mb-6">
                    <p class="font-bold mb-1">üì¢ ENTREG√ÅVEIS OBRIGAT√ìRIOS E PRAZO</p>
                    <p class="text-sm">Os principais entreg√°veis para a submiss√£o da Fase 2 s√£o o **Documento T√©cnico (PDF)** e o **V√≠deo Descrevendo o Prot√≥tipo**. O prazo final para estas entregas √© **15 de dezembro**.</p>
                </div>
                <!-- FIM DO NOVO DESTAQUE -->

                <div class="overflow-x-auto mb-6">
                    <table class="min-w-full bg-gray-50 rounded-lg overflow-hidden text-sm">
                        <thead>
                            <tr class="bg-gray-200 text-gray-700 uppercase tracking-wider">
                                <th class="py-3 px-4 text-left">Requisito</th>
                                <th class="py-3 px-4 text-left">Detalhe T√©cnico</th>
                                <th class="py-3 px-4 text-left">Alvo da Programa√ß√£o/Teste</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="py-3 px-4 font-semibold">Sensores</td>
                                <td class="py-3 px-4">Press√£o, Temperatura, N√≠vel da Bateria, Aceler√¥metro e Girosc√≥pio (3 eixos).</td>
                                <td class="py-3 px-4">Leitura e calibra√ß√£o de todos os sensores.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4 font-semibold">Comunica√ß√£o</td>
                                <td class="py-3 px-4">HTTP POST (JSON) para `http://192.168.0.1/`.</td>
                                <td class="py-3 px-4">Cria√ß√£o da string JSON e envio via Wi-Fi.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4 font-semibold">Intervalo</td>
                                <td class="py-3 px-4">Envio de dados a cada **4 minutos**, por no m√≠nimo **40 minutos**.</td>
                                <td class="py-3 px-4">Implementa√ß√£o de temporizador no loop principal (240.000 ms).</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4 font-semibold">Mec√¢nica</td>
                                <td class="py-3 px-4">Montagem est√°vel, robusta e isolamento t√©rmico da bateria.</td>
                                <td class="py-3 px-4">Comprova√ß√£o via testes e documenta√ß√£o (fotos e desenhos).</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="programacao" class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-6 border-b pb-2">2. üíª Programa√ß√£o do ESP32 com BIPES</h2>
                <p class="mb-6 text-gray-600">O BIPES (Block Based Integrated Platform for Embedded Systems) simplifica a complexidade da comunica√ß√£o, permitindo que a equipe foque na l√≥gica da miss√£o.</p>

                <h3 id="sensores" class="text-xl font-semibold text-gray-700 mb-4 pt-2">2.1. Etapa 1: Leitura e Integra√ß√£o dos Sensores Obrigat√≥rios (I2C)</h3>
                <p class="mb-4">Para economizar pinos e simplificar as conex√µes, utilize o barramento I2C, que permite conectar o BMP280 e o MPU6050 aos mesmos dois pinos do ESP32 (SDA e SCL).</p>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <h4 class="font-bold text-lg text-[#00796b] mb-2">Dados Atmosf√©ricos (BMP280)</h4>
                        <p class="text-sm mb-3">O BMP280 fornece Press√£o e Temperatura. Sua leitura de press√£o √© usada para calcular a Altitude (dado chave para a miss√£o).</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 mb-3">
                            <li>**Comunica√ß√£o:** I2C (SDA -> GPIO 21; SCL -> GPIO 22).</li>
                            <li>**No BIPES:** Use blocos na se√ß√£o I2C para inicializar o sensor.</li>
                        </ul>
                        <div class="video-container">
                            <iframe width="100%" height="100%" src="https://www.youtube.com/embed/H42OY60SA8o" title="BMP280 no ESP32 para medir press√£o, temperatura e altitude" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                        <p class="text-xs mt-2 italic text-gray-500 text-center">V√≠deo: BMP280 no ESP32 para medir press√£o, temperatura e altitude</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <h4 class="font-bold text-lg text-[#00796b] mb-2">Dados Inerciais (MPU6050)</h4>
                        <p class="text-sm mb-3">O MPU6050 fornece os valores de **Aceler√¥metro** e **Girosc√≥pio** (eixos X, Y, Z), cruciais para monitorar a atitude e vibra√ß√£o durante o voo.</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 mb-3">
                            <li>**Comunica√ß√£o:** I2C (Compartilha os mesmos pinos SDA/SCL que o BMP280).</li>
                            <li>**No BIPES:** Use blocos espec√≠ficos para MPU6050 (ou MPU9250).</li>
                        </ul>
                        <div class="video-container">
                             <iframe width="100%" height="100%" src="https://www.youtube.com/embed/S3078E0p104" title="Como usar o MPU6050 com ESP32 - Aceler√¥metro e Girosc√≥pio" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                        <p class="text-xs mt-2 italic text-gray-500 text-center">V√≠deo: Como usar o MPU6050 com ESP32 - Aceler√¥metro e Girosc√≥pio</p>
                    </div>
                </div>

                <h3 id="json" class="text-xl font-semibold text-gray-700 mb-4 pt-2">2.2. Etapa 2: Formata√ß√£o JSON e L√≥gica de Envio</h3>
                <p class="mb-4">O c√≥digo no BIPES deve garantir que a telemetria √© enviada no formato exigido, no intervalo correto e para o endere√ßo da sonda de voo.</p>

                <div class="bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-lg mb-6">
                    <p class="font-bold">Estrutura JSON Obrigat√≥ria</p>
                    <p class="text-sm">Certifique-se de que os nomes dos campos (`equipe`, `bateria`, `temperatura`, `pressao`, `giroscopio`, `acelerometro`, `payload`) sejam EXATAMENTE estes.</p>
                </div>

                <div class="bg-gray-800 p-4 rounded-lg text-xs font-mono text-gray-200 overflow-x-auto mb-6">
                    <pre><code>{
"equipe": "ID_DA_SUA_EQUIPE",
"bateria": VALOR_ADC_BATERIA,
"temperatura": VALOR_BMP280_TEMP,
"pressao": VALOR_BMP280_PRESSAO,
"giroscopio": [GX, GY, GZ], // MPU6050
"acelerometro": [AX, AY, AZ], // MPU6050
"payload": {
    "dado_missao": DADO_DA_SUA_MISS√ÉO,
    "status": "OK"
}
}</code></pre>
                </div>
                
                <p class="mb-2 font-semibold">L√≥gica de Programa√ß√£o (Fluxo no BIPES):</p>
                <ul class="list-decimal list-inside text-gray-600 mb-6 space-y-1 text-sm bg-yellow-50 p-4 rounded-lg">
                    <li>**Inicializa√ß√£o:** Conectar o ESP32 √† rede Wi-Fi `OBSAT_WIFI` e senha `OBSatZenith1000` (para testes, use a sua rede).</li>
                    <li>**Loop de 4 Minutos:** Blocos de repeti√ß√£o cont√≠nua com um bloco de **Delay de 240.000 ms** no final.</li>
                    <li>**Montagem do Objeto:** Criar o objeto JSON, inserindo todas as vari√°veis lidas na Etapa 1.</li>
                    <li>**Transmiss√£o:** Bloco HTTP/Rede com o m√©todo **POST** e URL `http://192.168.0.1/`.</li>
                </ul>

            </section>

            <section id="testes" class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-6 border-b pb-2">3. üõ°Ô∏è Estrat√©gias de Testes de Robustez e Confiabilidade</h2>
                <p class="mb-4 text-gray-600">O Relat√≥rio de Testes √© sua prova de que o sat√©lite sobreviver√° ao lan√ßamento. Os testes devem ser documentados com resultados, fotos/v√≠deos e an√°lises.</p>

                <h3 id="mecanica" class="text-xl font-semibold text-gray-700 mb-4 pt-2">3.1. Robustez Mec√¢nica</h3>
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-4">
                    <p class="font-bold text-green-800">Objetivo:</p>
                    <p class="text-sm text-green-700">Comprovar que a estrutura, parafusos e conex√µes resistem a vibra√ß√µes e pequenos choques.</p>
                </div>
                <ul class="list-disc list-inside text-gray-600 mb-6 ml-4">
                    <li>**Teste de Vibra√ß√£o:** Prenda o prot√≥tipo em uma superf√≠cie vibrat√≥ria (ex: parte lateral de um ventilador ou m√°quina de lavar) e monitore a telemetria do MPU6050 (Aceler√¥metro) para detectar falhas ou interrup√ß√µes no envio de dados.</li>
                    <li>**Teste de Choque:** Deixe o sat√©lite cair suavemente (aprox. 30 cm) sobre um tapete (simulando um impacto menor) e verifique se as soldas e componentes n√£o se soltam.</li>
                </ul>
                
                <h3 id="eletronica" class="text-xl font-semibold text-gray-700 mb-4 pt-2">3.2. Robustez Eletr√¥nica e Magn√©tica</h3>
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-4">
                    <p class="font-bold text-green-800">Objetivo:</p>
                    <p class="text-sm text-green-700">Garantir que o sistema de energia √© est√°vel e que a leitura dos sensores inerciais n√£o √© facilmente corrompida.</p>
                </div>
                <ul class="list-disc list-inside text-gray-600 mb-6 ml-4">
                    <li>**Estresse de Tens√£o:** Deixe o sat√©lite ligado, transmitindo continuamente, e monitore o consumo. Registre quanto tempo ele opera e se a estabilidade do ESP32 √© mantida √† medida que a bateria se esgota.</li>
                    <li>**Interfer√™ncia Magn√©tica:** Aproxime um √≠m√£ do MPU6050 (Girosc√≥pio/Aceler√¥metro) enquanto monitora seus dados. O objetivo n√£o √© evitar a leitura errada durante o contato, mas sim provar que os sensores **retornam √† leitura normal** ap√≥s a remo√ß√£o da interfer√™ncia.</li>
                </ul>

                <h3 id="termica" class="text-xl font-semibold text-gray-700 mb-4 pt-2">3.3. Robustez T√©rmica (Simula√ß√£o)</h3>
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-4">
                    <p class="font-bold text-green-800">Objetivo:</p>
                    <p class="text-sm text-green-700">Comprovar a efic√°cia do isolamento t√©rmico na prote√ß√£o dos componentes em baixas temperaturas.</p>
                </div>
                <ul class="list-disc list-inside text-gray-600 mb-6 ml-4">
                    <li>**Teste de Congelamento:** Enrole o sat√©lite com o seu material de isolamento (Depron/EPE). Coloque-o no congelador (freezer) junto com um term√¥metro externo (de cozinha, por exemplo) para saber a temperatura da c√¢mara.</li>
                    <li>Monitore a **temperatura interna** (lida pelo BMP280, que deve estar exposto) e a **transmiss√£o de dados**. O sat√©lite deve continuar transmitindo mesmo em condi√ß√µes de frio extremo (simuladas) por um tempo prolongado (ex: 30 minutos).</li>
                </ul>
                
                <h3 id="transmissao" class="text-xl font-semibold text-gray-700 mb-4 pt-2">3.4. Teste de Captura e Transmiss√£o de Dados</h3>
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-4">
                    <p class="font-bold text-green-800">Objetivo:</p>
                    <p class="text-sm text-green-700">Comprovar o funcionamento completo do loop de telemetria.</p>
                </div>
                <ul class="list-disc list-inside text-gray-600 mb-6 ml-4">
                    <li>**Teste de Loop Temporal:** Use um cron√¥metro e o Serial Monitor (ou um servidor HTTP simulado) para confirmar que as transmiss√µes ocorrem a cada **240 segundos** (4 minutos) e que o loop de 40 minutos (10 envios) pode ser completado.</li>
                    <li>**Valida√ß√£o do JSON:** Verifique no servidor de teste se o pacote JSON recebido est√° estruturado corretamente e se os valores dos sensores (movimentando o sat√©lite e alterando a press√£o/temperatura) s√£o lidos e transmitidos com precis√£o.</li>
                </ul>
            </section>

            <footer class="text-center text-sm text-gray-500 pt-8 pb-4">
                <p>Guia interativo da Fase 2 da OBSAT, focado na programa√ß√£o com ESP32/BIPES e testes de robustez.</p>
            </footer>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            const menuLinks = document.getElementById('menu-links');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');
            const navLinks = document.querySelectorAll('#menu-links a');

            // 1. Toggle do Menu Lateral para Mobile
            menuToggle.addEventListener('click', () => {
                const isHidden = menuLinks.classList.contains('hidden');
                
                if (isHidden) {
                    // Abrir Menu
                    menuLinks.classList.remove('hidden');
                    menuIcon.classList.add('hidden');
                    closeIcon.classList.remove('hidden');
                    // Mostrar a sidebar no mobile
                    sidebar.classList.remove('-translate-x-full');
                    sidebar.classList.add('h-screen', 'shadow-2xl');
                } else {
                    // Fechar Menu
                    menuLinks.classList.add('hidden');
                    menuIcon.classList.remove('hidden');
                    closeIcon.classList.add('hidden');
                    // Esconder a sidebar no mobile
                    sidebar.classList.add('-translate-x-full');
                    sidebar.classList.remove('h-screen', 'shadow-2xl');
                }
            });

            // Fechar o menu ao clicar em um link no mobile
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 768) {
                        menuLinks.classList.add('hidden');
                        menuIcon.classList.remove('hidden');
                        closeIcon.classList.add('hidden');
                        sidebar.classList.add('-translate-x-full');
                        sidebar.classList.remove('h-screen', 'shadow-2xl');
                    }
                });
            });

            // 2. Atualizar o Link Ativo no Menu (Baseado na Posi√ß√£o de Scroll)
            const sections = document.querySelectorAll('section[id]');

            const updateActiveLink = () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100; // Offset para melhor visualiza√ß√£o
                    if (scrollY >= sectionTop) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.href.includes(current)) {
                        link.classList.add('active');
                    }
                });
            };

            window.addEventListener('scroll', updateActiveLink);
            updateActiveLink(); // Chamar na carga inicial
        });
    </script>
</body>
</html>
